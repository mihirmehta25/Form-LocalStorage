<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="App.css">
    <title>Password Change</title>
    <script>
        function changePassword() {

            var oldPassword = document.getElementById('oldPassword').value;
            var newPassword = document.getElementById('newPassword').value;
            var confirmNewPassword = document.getElementById('confirmNewPassword').value;

            var storedPassword = localStorage.getItem('userdata');
            var parsedpassword = JSON.parse(storedPassword);
            console.log(parsedpassword);

            if (oldPassword === parsedpassword.password) {
                if (newPassword === confirmNewPassword) {
                    window.location = 'http://127.0.0.1:5500/src/signin.html';
                    parsedpassword.password = newPassword;
                    localStorage.setItem('userdata', JSON.stringify(parsedpassword));

                    alert('Password Changed Successfully!');
                    document.getElementById('oldPassword').value = '';
                    document.getElementById('newPassword').value = '';
                    document.getElementById('confirmNewPassword').value = '';
                }
                else {
                    alert('New password and confirm password do not match!');
                }
            }
            else {
                alert('Old password is incorrect!');
            }
        }

    </script>
</head>

<body>
    <h2>Password Change</h2>
    <form onsubmit="event.preventDefault(); changePassword();">

        <label for="oldPassword">Old Password :</label>

        <input type="password" id="oldPassword" required><br><br>

        <label for="newPassword">New Password :</label>

        <input type="password" id="newPassword" required><br><br>

        <label for="confirmNewPassword">Confirm New Password:</label>

        <input type="password" id="confirmNewPassword" required><br><br>

        <button type="submit">Change Password</button>
    </form>
</body>

</html>